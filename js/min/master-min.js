function color(){var e="rgb("+(Math.floor(255*Math.random())-150)+","+(Math.floor(255*Math.random())-150)+","+(Math.floor(255*Math.random())-150)+")";return e+""}function push_Faces(e,t,a){var r=e,n=.05*t,o=.02*a,i=new THREE.Face3(r,n,o);return i}function push_Vertices(e,t,a){var r=e,n=.05*t,o=.02*a,i=new THREE.Vector3(r,n,o);return i}function color_Vertices(e,t,a){var r=new THREE.Color(e,t,a);return r}function orbit_controls(e,t){var a=new THREE.OrbitControls(t);return a.rotateSpeed=e.camera.fly.rotateSpeed,a.keyPanSpeed=e.camera.fly.keyPanSpeed,a.maxPolarAngle=Math.PI/2,a.center=new THREE.Vector3(e.camera.target.x,e.camera.target.y,e.camera.target.z),a}function fly_controls(e,t){var a=new THREE.FlyControls(t);return a.movementSpeed=e.camera.fly.movementSpeed,a.domElement=renderer.domElement,a.rollSpeed=e.camera.fly.rollSpeed,a.autoForward=e.camera.fly.autoForward,a.dragToLook=e.camera.fly.dragToLook,a}function trackball_controls(e,t){var a=new THREE.TrackballControls(t);return a.rotateSpeed=1,a.zoomSpeed=1.2,a.panSpeed=.8,a.noZoom=!1,a.noPan=!1,a.staticMoving=!0,a.dynamicDampingFactor=.3,a.keys=[65,83,68],a}function camera_switch(e,t){var a=camera;camera=new THREE.PerspectiveCamera,camera.position.copy(a.position),camera.rotation.copy(a.rotation);var r={ORBIT:"orbit",FLY:"fly",TRACKBALL:"trackball"};switch(t){case r.ORBIT:controls=new THREE.OrbitControls(camera),t=r.ORBIT;break;case r.FLY:controls=fly_controls(e,camera),t=r.FLY;break;case r.TRACKBALL:controls=trackball_controls(e,camera),t=r.FLY}}function particle_obj(e,t){this.particles=new THREE.Geometry,this.pMaterial=new THREE.PointCloudMaterial({color:16777215,transparent:!0,opacity:.7,vertexColors:THREE.VertexColors,size:1,map:THREE.ImageUtils.loadTexture("./assets/img/bars.png")}),e.stripes(t),!e.get_next_stripe();var a=0;return this.stripe_count=t,this.color_count=0,this.set_vertices=!0,this.colors=[],this.generate=function(){if(this.stripes=e.get_next_stripe(),!this.stripes)return this.particles.colors=this.colors,this.particleSystem=new THREE.PointCloud(this.particles,this.pMaterial),scene.add(this.particleSystem),this.color_count=this.particleSystem.geometry.colors.length,this;for(var t=0;t<this.stripes.length;t++)for(var r=0;25>r;r++)a++,this.colors.push(color_Vertices(Math.random(),0,0)),this.particles.vertices.push(push_Vertices(r,this.stripes[t][r],-a));this.generate()},this.currColor=0,this.changeColor=function(){this.currColor++,this.stripes=e.get_next_stripe(),console.log(this.currColor);for(var t=this.currColor;t<this.currColor+32*this.currColor;t++)a++,this.particleSystem.geometry.colors[t]=new THREE.Color(1,1,1);this.particleSystem.geometry.colorsNeedUpdate=!0},this.update=function(){this.set_vertices=!1,e.get_next_stripe()?this.changeColor():(this.total=0,e.stripes(100))},this.generate(),this}function loading_stack(e){var t=new particle_obj(e,100);models_to_update=[t]}function calculateTimeline(e){var t=Math.round(100*e.currentTime/e.duration),a=window.innerHeight*t/100;return a}function init(e){void 0===$loop&&($loop=render())}function render(){return stats.begin(),$player_info.currentTime=$player_src.currentTime,$timeline.height(calculateTimeline($player_info)),$loop=requestAnimationFrame(render),controls.update(1),!$player_src.paused&&userOpts.play&&TWEEN.update(),renderer.render(scene,camera),stats.end(),$loop}var MATH_ROT=-Math.PI/2,$loop,å={data:{},size:10,store_data:function(e){this.data=e},calculate_stripes:function(e){if(!e)return console.warn("Missing Number! How many stripes do you wanna have?"),!1;var t,a,r,n=e,o=[];for(t=0,a=this.data.length;a>t;t+=n)r=this.data.slice(t,t+n),o.push(r);return o},stripes_count:0,stripes_data:[],stripes:function(e){if(a)return!1;if(e)if(e!=t)t=e;else var t=e;else var t=this.size;var a=this.calculate_stripes(t);return this.stripes_count=a.length,this.stripes_data=a,console.log("stripes count: "+this.stripes_count),!1},loop:!1,get_next_stripe:function(){var e=0;return 0!=this.stripes_count?(e=this.stripes_data.length-this.stripes_count,this.stripes_count--,this.stripes_data[e]?this.stripes_data[e]:(console.log("there are no prev data stripes"),!1)):this.loop?(this.stripes_count=this.stripes_data.length,this.stripes_data[0]?(console.log("looop"),this.stripes_data[0]):(console.warn("No stripes! Generate new .stripes() first!"),!1)):(console.log("ende"),!1)},get_prev_stripe:function(){if(0!=this.stripes_count){if(this.stripes_count!==this.stripes_data.length){this.stripes_count++;var e=this.stripes_data.length-this.stripes_count;return this.stripes_data[e]}console.warn("there are no prev data stripes")}else console.warn("run .stripes() first!")}},userOpts={ready:!1,play:!1,range:1,duration:2500,delay:200,easing:"Elastic.EaseInOut",camera:{x:100,y:20,z:50,target:{x:0,y:10,z:-40},orbit:{rotateSpeed:.1,keyPanSpeed:.001,maxPolarAngle:Math.PI/2,center:new THREE.Vector3(0,0,0)},fly:{movementSpeed:1,rollSpeed:.01,autoForward:!1,dragToLook:!0}}},context;"undefined"!=typeof AudioContext?context=new AudioContext:"undefined"!=typeof webkitAudioContext&&(context=new webkitAudioContext);for(var lastTime=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var a=(new Date).getTime(),r=Math.max(0,16-(a-lastTime)),n=window.setTimeout(function(){e(a+r)},r);return lastTime=a+r,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e),$time=0});var audioData={};$.ajax({dataType:"json",url:"js/audioData_4.json",success:function(e){userOpts.ready=!0,å.store_data(e),loading_stack(å)}});var stats=new Stats;stats.setMode(0),stats.domElement.style.position="absolute",stats.domElement.style.right="0px",stats.domElement.style.top="0px",document.body.appendChild(stats.domElement);var scene=new THREE.Scene;scene.fog=new THREE.FogExp2(0,.005);var camera=new THREE.PerspectiveCamera(35,window.innerWidth/window.innerHeight,.5,1e3);camera.minDistance=0,camera.maxDistance=1/0,camera.rotation.z=Math.sin(camera.rotation.y)/3.5,camera.minPolarAngle=0,camera.maxPolarAngle=Math.PI,camera.position.set(userOpts.camera.x,userOpts.camera.y,userOpts.camera.z),camera.lookAt(new THREE.Vector3(userOpts.camera.target.x,userOpts.camera.target.y,userOpts.camera.target.z));var renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setSize(window.innerWidth,window.innerHeight),renderer.setClearColor(0,0),renderer.shadowMapType=THREE.PCFSoftShadowMap,renderer.shadowMapEnabled=!0,renderer.shadowMapSoft=!0,renderer.shadowCameraFov=150,renderer.shadowMapBias=.1,renderer.shadowMapDarkness=.5,document.body.appendChild(renderer.domElement);var controls=fly_controls(userOpts,camera),$_orbit=$(".controls-orbit"),$_fly=$(".controls-fly"),$_trackball=$(".controls-trackball");$_orbit.bind({click:function(){camera_switch(userOpts,"orbit")}}),$_fly.bind({click:function(){camera_switch(userOpts,"fly"),console.log("fly")}}),$_trackball.bind({click:function(){camera_switch(userOpts,"trackball"),console.log("trackball")}});var $row=0,$seat=0,update=function(){$row++,models_to_update.forEach(function(e){e.update()})},easing=TWEEN.Easing[userOpts.easing.split(".")[0]][userOpts.easing.split(".")[1]],jump_In=(new TWEEN.Tween).to({},userOpts.duration).delay(userOpts.delay).easing(easing).onUpdate(update);jump_In.start(),jump_In.chain(jump_In);var geometry=new THREE.BoxGeometry(100,1,1),material=new THREE.MeshPhongMaterial({color:16711680}),menu=new THREE.Mesh(geometry,material);camera.add(menu);var spotLight=new THREE.SpotLight(15658734);spotLight.position.set(50,200,50),spotLight.intensity=2,spotLight.castShadow=!0,spotLight.target.position.set(0,0,0),spotLight.shadowDarkness=.5,spotLight.shadowMapWidth=2048,spotLight.shadowMapHeight=2048,spotLight.shadowCameraNear=1,spotLight.shadowCameraFar=1e3,scene.add(spotLight);var sunLight=new THREE.SpotLight(16777215);sunLight.position.set(0,1e3,0),sunLight.intensity=.4,scene.add(sunLight);var rimLight=new THREE.SpotLight(16772778);rimLight.position.set(0,0,-500),rimLight.intensity=1,scene.add(rimLight);var frontLight=new THREE.SpotLight(16772778);frontLight.position.set(0,0,500),frontLight.intensity=.25,scene.add(frontLight);var ambientLight=new THREE.AmbientLight(13421772);scene.add(ambientLight);var plane_options={width:window.innerWidth,height:window.innerHeight,position:{x:0,y:-.25,z:0}},$phongMaterialOptions={color:2236962,ambient:0,specular:0,shininess:0,wireframe:!1},plane_geometry=new THREE.PlaneBufferGeometry(plane_options.width,plane_options.height,32),plane_material=new THREE.MeshPhongMaterial($phongMaterialOptions),plane=new THREE.Mesh(plane_geometry,plane_material);plane.rotation.x=MATH_ROT,plane.position.x=plane_options.position.x,plane.position.y=plane_options.position.y,plane.position.z=plane_options.position.z,plane.receiveShadow=!0,scene.add(plane);var loader=new THREE.JSONLoader;loader.load("js/models/hirsch.js",function(e,t){var a=new THREE.MeshLambertMaterial(t),r=new THREE.Mesh(e,a);r.scale.set(3,3,3),r.position.set(-25,10,-150),r.rotation.set(0,-1*MATH_ROT,0),scene.add(r)}),loader.load("js/models/ape.js",function(e,t){var a=new THREE.MeshFaceMaterial(t),r=new THREE.Mesh(e,a);r.scale.set(3,3,3),r.position.set(50,0,-100),scene.add(r)}),loader.load("js/models/haus.js",function(e,t){var a=new THREE.MeshFaceMaterial(t),r=new THREE.Mesh(e,a);r.scale.set(3,3,3),r.position.set(-50,0,-100),scene.add(r)});var models_to_update=[],$player=$("#player"),$player_src=$player.get(0);$player_src.round_duration=Math.round($player_src.duration);var $player_info={duration:$player_src.round_duration,currentTime:0},$head_navi=$(".audioNav"),$play_button=$(".play"),$timeline=$(".time"),$duration=$player_src.duration,$timeLineWidth=$head_navi.width()-100;$play_button.bind({click:function(){$player_src.paused?($(this).removeClass("off").addClass("on"),$player_src.play(),userOpts.play=!0):($(this).removeClass("on").addClass("off"),$player_src.pause(),userOpts.play=!1)}}),$player.on({canplay:function(e){},timeupdate:function(e){},play:function(e){$player_src.playbackRate=1},pause:function(e){},ended:function(e){}}),init(),window.onresize=function(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)};
//# sourceMappingURL=./master-min.js.map