function color(){var e="rgb("+(Math.floor(255*Math.random())-150)+","+(Math.floor(255*Math.random())-150)+","+(Math.floor(255*Math.random())-150)+")";return e+""}function cube(e){var t=new THREE.BoxGeometry(e.x_height,e.y_height,e.z_height),a=new THREE.MeshPhongMaterial($phongMaterialOptions),n=new THREE.Mesh(t,a);return n.castShadow=!0,n.receiveShadow=!0,n.position.x=e.x,n.position.y=e.y,n.position.z=e.z,n.rotation.x=e.rotation.x,n.rotation.y=e.rotation.y,n.rotation.z=e.rotation.z,n}function color(){var e="rgb("+(Math.floor(255*Math.random())-150)+","+(Math.floor(255*Math.random())-150)+","+(Math.floor(255*Math.random())-150)+")";return e+""}function readyToPlayback(e){var t=0;for(i in e.data)i%30==0&&t++,smallerAudio[t]?smallerAudio[t].push(e.data[i]):smallerAudio[t]=[e.data[i]];playBack(smallerAudio)}function playBack(e){for(var t=0,a=0,n=0;60>n;n++){t=n;for(var o in e[1][n])a++,cube_options.z=1.1*-t,cube_options.x=-17+1.1*o,0===e[1][n][o]&&(e[1][n][o]=.1),cube_options.y_height=.25*e[1][n][o],cubes.add(cube(cube_options))}}function grid(e){var t=new THREE.BoxGeometry(e.x_height,e.y_height,e.z_height),a=new THREE.MeshLambertMaterial({color:16711680}),n=new THREE.Mesh(t,a);return n.castShadow=!0,n.receiveShadow=!0,n.position.x=e.x,n.position.y=e.y,n.position.z=e.z,n}function color(){var e="rgb("+(Math.floor(255*Math.random())-150)+","+(Math.floor(255*Math.random())-150)+","+(Math.floor(255*Math.random())-150)+")";return e+""}function readyToPlayback(e){var t=stripe(10,e.data);cube_options.length=e.data.length;for(var a=0;a<t.length;a++){var n=playBack(a,t[a]);total=new THREE.Mesh(n,cube_material),total.castShadow=!0,total.receiveShadow=!0,total.position.z=-4.95*a,group.add(total)}scene.add(group)}function stripe(e,t){var a,n,o,i=e,r=[];for(a=0,n=t.length;n>a;a+=i)o=t.slice(a,a+i),r.push(o);return r}function single_cube(e){var t=new THREE.BoxGeometry(e.x_height,e.y_height,e.z_height),a=new THREE.Mesh(t,box_material);return a.position.x=-e.x_height,a.position.z=-e.z_height,a.scale.y=realsource[i][j],a.updateMatrix(),a}function calculatePercentage(e){var t=100*e/12865;console.log("max = 12865","curr = "+e,t)}function playBack(e,t){for(var a=new THREE.Geometry,n=new THREE.MeshPhongMaterial($phongMaterialOptions),o=0,i=t.length,r=0;i>r;r++)for(var s=0;32>s;s++)if(calculatePercentage(e*s*r),t[r][s]<.1);else{var d=new THREE.BoxGeometry(cube_options.x_height,cube_options.y_height,cube_options.z_height),h=new THREE.Mesh(d,n);h.position.x=1.5*-s,h.scale.y=.05*t[r][s],h.position.z=1.1*-cube_options.z_height*r,h.updateMatrix(),a.merge(h.geometry,h.matrix)}return a}function init(e){$loop=render()}function render(){return stats.begin(),$loop=requestAnimationFrame(render),controls.update(),TWEEN.update(),renderer.render(scene,camera),stats.end(),$loop}var MATH_ROT=-Math.PI/2,$loop,userOpts={ready:!1,range:1,duration:2500,delay:200,easing:"Elastic.EaseInOut",camera:{x:0,y:20,z:150,target:{x:0,y:20,z:0}}},context;"undefined"!=typeof AudioContext?context=new AudioContext:"undefined"!=typeof webkitAudioContext&&(context=new webkitAudioContext);for(var lastTime=0,vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var a=(new Date).getTime(),n=Math.max(0,16-(a-lastTime)),o=window.setTimeout(function(){e(a+n)},n);return lastTime=a+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e),$time=0});var audioData={},data=$.ajax({dataType:"json",url:"js/audioData_2.json",data:function(e){},success:function(e){userOpts.ready=!0,audioData.data=e,readyToPlayback(audioData)}}),stats=new Stats;stats.setMode(0),stats.domElement.style.position="absolute",stats.domElement.style.right="0px",stats.domElement.style.top="0px",document.body.appendChild(stats.domElement);var scene=new THREE.Scene;scene.fog=new THREE.FogExp2(13421772,.005);var camera=new THREE.PerspectiveCamera(35,window.innerWidth/window.innerHeight,.5,1e3);camera.position.set(userOpts.camera.x,userOpts.camera.y,userOpts.camera.z),camera.lookAt(new THREE.Vector3(userOpts.camera.target.x,userOpts.camera.target.y,userOpts.camera.target.z)),camera.minDistance=0,camera.maxDistance=1/0,camera.minPolarAngle=0,camera.maxPolarAngle=Math.PI;var renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setSize(window.innerWidth,window.innerHeight),renderer.setClearColor(13421772,0),renderer.shadowMapType=THREE.PCFSoftShadowMap,renderer.shadowMapEnabled=!0,renderer.shadowMapSoft=!0,renderer.shadowCameraFov=150,renderer.shadowMapBias=.1,renderer.shadowMapDarkness=.5,document.body.appendChild(renderer.domElement);var controls=new THREE.OrbitControls(camera);controls.rotateSpeed=.1,controls.keyPanSpeed=.001,controls.maxPolarAngle=Math.PI/2;var update=function(){},easing=TWEEN.Easing[userOpts.easing.split(".")[0]][userOpts.easing.split(".")[1]],jump_In=(new TWEEN.Tween).to({},userOpts.duration).delay(userOpts.delay).easing(easing).onUpdate(update);jump_In.start(),jump_In.chain(jump_In);var spotLight=new THREE.SpotLight(15658734);spotLight.position.set(50,200,50),spotLight.intensity=2,spotLight.castShadow=!0,spotLight.target.position.set(0,0,0),spotLight.shadowDarkness=.5,spotLight.shadowMapWidth=2048,spotLight.shadowMapHeight=2048,spotLight.shadowCameraNear=1,spotLight.shadowCameraFar=1e3,scene.add(spotLight);var sunLight=new THREE.SpotLight(16777215);sunLight.position.set(0,1e3,0),sunLight.intensity=.1,scene.add(sunLight);var rimLight=new THREE.SpotLight(16772778);rimLight.position.set(0,0,-500),rimLight.intensity=1,scene.add(rimLight);var frontLight=new THREE.SpotLight(16772778);frontLight.position.set(0,0,500),frontLight.intensity=.25,scene.add(frontLight);var ambientLight=new THREE.AmbientLight(2236962);scene.add(ambientLight);var plane_options={width:window.innerWidth,height:window.innerHeight,position:{x:0,y:-.25,z:0}},plane_geometry=new THREE.PlaneGeometry(plane_options.width,plane_options.height,32),plane_material=new THREE.MeshLambertMaterial({color:13421772,side:THREE.DoubleSide}),plane=new THREE.Mesh(plane_geometry,plane_material);plane.rotation.x=MATH_ROT,plane.position.x=plane_options.position.x,plane.position.y=plane_options.position.y,plane.position.z=plane_options.position.z,plane.receiveShadow=!0,scene.add(plane);var cubes=new THREE.Object3D,$groups=[],oldData,cube_options={x_height:1,y_height:1,z_height:1,rotation:{x:0,y:0,z:0},x:0,y:-.25,z:0},$phongMaterialOptions={color:3355443,ambient:2236962,specular:0,shininess:2236962,wireframe:!0},smallerAudio={},cubes_count=0,group_grid=new THREE.Object3D,grid_options={x_height:.5,y_height:12.5,z_height:.5,x:0,y:5,z:0};group_grid.add(grid(grid_options));var cube_options={x_height:2,y_height:.5,z_height:4,rotation:{x:0,y:0,z:0},x:0,y:0,z:0},$phongMaterialOptions={color:3355443,ambient:2236962,specular:0,shininess:2236962,wireframe:!1},cube_material=new THREE.MeshPhongMaterial($phongMaterialOptions),group=new THREE.Object3D,total,row=0;jQuery(document).ready(function($){var e=$("#player"),t=e.get(0);t.round_duration=Math.round(t.duration);var a={duration:t.round_duration,currentTime:0},n=$(".audioNav"),o=$(".play"),i=$(".time"),r=t.duration,s=n.width()-100;o.bind({click:function(){t.paused?($(this).removeClass("off").addClass("on"),t.play(),init()):($(this).removeClass("on").addClass("off"),t.pause(),cancelAnimationFrame($loop))}}),e.on({canplay:function(e){},timeupdate:function(e){a.currentTime=Math.round(this.currentTime)},play:function(e){t.playbackRate=1},pause:function(e){cancelAnimationFrame($loop)},ended:function(e){}})}),init(),window.onresize=function(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)};
//# sourceMappingURL=./master-min.js.map